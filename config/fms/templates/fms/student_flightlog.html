{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>NAV | Bitácora</title>
        <link href="{% static 'dashboard.css' %}" rel="stylesheet" />
        <link href="{% static 'shared_components.css' %}" rel="stylesheet" />
        <link href="{% static 'fms_dashboard.css' %}" rel="stylesheet" />
    </head>

    <body>
        <div class="fms-container">
            <div class="back-button">
                <a href="{% url 'dashboard:dashboard' %}" class="button">&larr; Volver</a>
            </div>

            <div class="fms-header">
                <h1>Bitácora de Vuelo</h1>
                <p>Mis registros de vuelo y simulador</p>
            </div>

            <div class="sections-container">
                <!-- Evaluations 0-100 -->
                <div class="section">
                    <div class="section-header">
                        <h2>Evaluaciones 0-100h</h2>
                        <p>Últimas 10 evaluaciones</p>
                    </div>
                    <div class="flight-list">
                        {% if latest_flight_0_100 %}
                            {% for session in latest_flight_0_100 %}
                                <a href="{% url 'fms:session_detail' '0_100' session.id %}" class="flight-item">
                                    <div class="flight-info">
                                        <span class="student-name">{{ session.instructor_first_name }} {{ session.instructor_last_name }}</span>
                                        <span class="session-grade {% if session.session_grade == 'S' %}grade-s{% elif session.session_grade == 'NS' %}grade-ns{% elif session.session_grade == 'NE' %}grade-ne{% endif %}">{{ session.session_grade }}</span>
                                    </div>
                                    <div class="flight-details">
                                        <div class="detail-item">
                                            <span class="detail-label">Fecha:</span>
                                            <span class="detail-value">{{ session.session_date|date:"d/m/Y" }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Sesión:</span>
                                            <span class="detail-value">{{ session.session_number }}{% if session.session_letter %}{{ session.session_letter }}{% endif %}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Aeronave:</span>
                                            <span class="detail-value">{{ session.aircraft.registration }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Horas:</span>
                                            <span class="detail-value">{{ session.session_flight_hours }}h</span>
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        {% else %}
                            <div class="no-flights">No hay evaluaciones 0-100h registradas</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Evaluations 100-120 -->
                <div class="section">
                    <div class="section-header">
                        <h2>Evaluaciones 100-120h</h2>
                        <p>Últimas 10 evaluaciones</p>
                    </div>
                    <div class="flight-list">
                        {% if latest_flight_100_120 %}
                            {% for session in latest_flight_100_120 %}
                                <a href="{% url 'fms:session_detail' '100_120' session.id %}" class="flight-item">
                                    <div class="flight-info">
                                        <span class="student-name">{{ session.instructor_first_name }} {{ session.instructor_last_name }}</span>
                                        <span class="session-grade {% if session.session_grade == 'S' %}grade-s{% elif session.session_grade == 'NS' %}grade-ns{% elif session.session_grade == 'NE' %}grade-ne{% endif %}">{{ session.session_grade }}</span>
                                    </div>
                                    <div class="flight-details">
                                        <div class="detail-item">
                                            <span class="detail-label">Fecha:</span>
                                            <span class="detail-value">{{ session.session_date|date:"d/m/Y" }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Sesión:</span>
                                            <span class="detail-value">{{ session.session_number }}{% if session.session_letter %}{{ session.session_letter }}{% endif %}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Aeronave:</span>
                                            <span class="detail-value">{{ session.aircraft.registration }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Horas:</span>
                                            <span class="detail-value">{{ session.session_flight_hours }}h</span>
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        {% else %}
                            <div class="no-flights">No hay evaluaciones 100-120h registradas</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Evaluations 120-170 -->
                <div class="section">
                    <div class="section-header">
                        <h2>Evaluaciones 120-170h</h2>
                        <p>Últimas 10 evaluaciones</p>
                    </div>
                    <div class="flight-list">
                        {% if latest_flight_120_170 %}
                            {% for session in latest_flight_120_170 %}
                                <a href="{% url 'fms:session_detail' '120_170' session.id %}" class="flight-item">
                                    <div class="flight-info">
                                        <span class="student-name">{{ session.instructor_first_name }} {{ session.instructor_last_name }}</span>
                                        <span class="session-grade {% if session.session_grade == 'S' %}grade-s{% elif session.session_grade == 'NS' %}grade-ns{% elif session.session_grade == 'NE' %}grade-ne{% endif %}">{{ session.session_grade }}</span>
                                    </div>
                                    <div class="flight-details">
                                        <div class="detail-item">
                                            <span class="detail-label">Fecha:</span>
                                            <span class="detail-value">{{ session.session_date|date:"d/m/Y" }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Sesión:</span>
                                            <span class="detail-value">{{ session.session_number }}{% if session.session_letter %}{{ session.session_letter }}{% endif %}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Aeronave:</span>
                                            <span class="detail-value">{{ session.aircraft.registration }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Horas:</span>
                                            <span class="detail-value">{{ session.session_flight_hours }}h</span>
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        {% else %}
                            <div class="no-flights">No hay evaluaciones 120-170h registradas</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Simulator Sessions -->
                <div class="section">
                    <div class="section-header">
                        <h2>Sesiones de Simulador</h2>
                        <p>Últimas 10 sesiones</p>
                    </div>
                    <div class="flight-list">
                        {% if latest_sim_sessions %}
                            {% for session in latest_sim_sessions %}
                                <a href="{% url 'fms:session_detail' 'sim' session.id %}" class="flight-item">
                                    <div class="flight-info">
                                        <span class="student-name">{{ session.instructor_first_name }} {{ session.instructor_last_name }}</span>
                                        <span class="session-grade {% if session.session_grade == 'S' %}grade-s{% elif session.session_grade == 'NS' %}grade-ns{% elif session.session_grade == 'NE' %}grade-ne{% endif %}">{{ session.session_grade }}</span>
                                    </div>
                                    <div class="flight-details">
                                        <div class="detail-item">
                                            <span class="detail-label">Fecha:</span>
                                            <span class="detail-value">{{ session.session_date|date:"d/m/Y" }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Sesión:</span>
                                            <span class="detail-value">{{ session.session_number }}{% if session.session_letter %}{{ session.session_letter }}{% endif %}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Simulador:</span>
                                            <span class="detail-value">{{ session.simulator.name }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Horas:</span>
                                            <span class="detail-value">{{ session.session_sim_hours }}h</span>
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        {% else %}
                            <div class="no-flights">No hay sesiones de simulador registradas</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
