{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NAV | SARA Dashboard</title>
    <link href="{% static 'sms_dashboard.css' %}" rel="stylesheet" />
    <link href="{% static 'shared_components.css' %}" rel="stylesheet" />
  </head>

  <body>
    <div class="sms-container">
      <div class="back-button">
        <a href="{% url 'dashboard:dashboard' %}" class="button">&larr; Volver</a>
      </div>

      <div class="sms-header">
        <h1>SARA Dashboard</h1>
        <p>Sistema de Gestión de Seguridad Operacional</p>
      </div>

      <!-- Voluntary Hazard Reports Container -->
      <div class="reports-section-container">
        <div class="section-header">
          <h2>Reportes Voluntarios de Peligro (RVP)</h2>
          <a href="{% url 'sms:voluntary_hazard_report' %}" class="add-button">
            Agregar RVP
          </a>
        </div>
        
        <div class="reports-list-container">
          {% if voluntary_reports %}
            {% for report in voluntary_reports %}
              <a href="{% url 'sms:voluntary_hazard_report_detail' report.id %}" class="report-card-link">
                <div class="report-card">
                  <div class="report-header">
                    <div class="report-date-time">
                      <span class="report-date">{{ report.date|date:"d/m/Y" }}</span>
                      <span class="report-time">{{ report.time|time:"H:i" }}</span>
                    </div>
                    <div class="report-status-badge status-{{ report.ai_analysis_status|lower }}">
                      {{ report.get_ai_analysis_status_display }}
                    </div>
                  </div>
                  
                  <div class="report-content">
                    <div class="report-area">
                      <span class="report-label">Área:</span>
                      <span class="report-value">{{ report.get_area_display }}</span>
                    </div>
                    
                    <div class="report-reporter">
                      <span class="report-label">Reportante:</span>
                      <span class="report-value">
                        {% if report.is_anonymous == 'YES' %}
                          Anónimo
                        {% elif report.first_name or report.last_name %}
                          {{ report.first_name }} {{ report.last_name }}
                        {% else %}
                          No especificado
                        {% endif %}
                      </span>
                    </div>
                    
                    <div class="report-description">
                      <span class="report-label">Descripción:</span>
                      <p class="report-description-text">{{ report.description|truncatewords:30 }}</p>
                    </div>
                  </div>
                </div>
              </a>
            {% endfor %}
          {% else %}
            <div class="no-reports">
              <p>No hay reportes voluntarios de peligro registrados.</p>
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Mandatory Event Reports Container -->
      <div class="reports-section-container">
        <div class="section-header">
          <h2>Reportes Obligatorios de Suceso</h2>
        </div>
        
        <div class="reports-list-container">
          <div class="no-reports">
            <p>No hay reportes obligatorios de suceso registrados.</p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
