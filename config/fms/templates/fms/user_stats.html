{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>NAV | Estadísticas de Usuarios</title>
        <link href="{% static 'fms_dashboard.css' %}" rel="stylesheet" />
        <link href="{% static 'shared_components.css' %}" rel="stylesheet" />
    </head>

    <body>
        <div class="main-container">
            <div class="back-button">
                <a href="{% url 'fms:fms_dashboard' %}" class="button">&larr; Volver</a>
            </div>


            <h1 class="main-header">Estadísticas de Usuarios</h1>

            <div class="sections-container">
                <!-- Students Section -->
                <div class="section">
                    <div class="section-header">
                        <h2>Estudiantes</h2>
                    </div>
                    <div class="flight-list">
                        {% if students %}
                            {% for student_profile in students %}
                                <a href="{% url 'fms:student_stats_detail' student_profile.user.national_id %}" class="flight-item">
                                    <div class="flight-info">
                                        <span class="student-name">{{ student_profile.user.first_name }} {{ student_profile.user.last_name }}</span>
                                    </div>
                                    <div class="flight-details three-columns">
                                        <div class="detail-item">
                                            <span class="detail-label">Usuario:</span>
                                            <span class="detail-value">{{ student_profile.user.username }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Fase:</span>
                                            <span class="detail-value">{{ student_profile.get_student_phase_display }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Horas NAV:</span>
                                            <span class="detail-value">{{ student_profile.nav_flight_hours }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">ID:</span>
                                            <span class="detail-value">{{ student_profile.user.national_id }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Balance:</span>
                                            <span class="detail-value">${{ student_profile.balance }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Horas Totales:</span>
                                            <span class="detail-value">{{ student_profile.flight_hours }}</span>
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        {% else %}
                            <div class="no-flights">No hay estudiantes registrados</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Instructors Section -->
                <div class="section">
                    <div class="section-header">
                        <h2>Instructores</h2>
                    </div>
                    <div class="flight-list">
                        {% if instructors %}
                            {% for instructor_profile in instructors %}
                                <a href="{% url 'fms:instructor_stats_detail' instructor_profile.user.national_id %}" class="flight-item">
                                    <div class="flight-info">
                                        <span class="student-name">{{ instructor_profile.user.first_name }} {{ instructor_profile.user.last_name }}</span>
                                        <span class="session-grade">{{ instructor_profile.user.national_id }}</span>
                                    </div>
                                    <div class="flight-details">
                                        <div class="detail-item">
                                            <span class="detail-label">Usuario:</span>
                                            <span class="detail-value">{{ instructor_profile.user.username }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Email:</span>
                                            <span class="detail-value">{{ instructor_profile.user.email }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Tipo:</span>
                                            <span class="detail-value">{{ instructor_profile.get_instructor_type_display }}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Tasa ($/h):</span>
                                            <span class="detail-value">${{ instructor_profile.instructor_hourly_rate }}</span>
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        {% else %}
                            <div class="no-flights">No hay instructores registrados</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

