{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>NAV | Reportes SMS</title>
        <link href="{% static 'report_list.css' %}" rel="stylesheet" />
        <link href="{% static 'shared_components.css' %}" rel="stylesheet" />
    </head>

    <body>
        <div class="back-button">
            <a href="{% url 'sms:main_sms' %}" class="button">&larr; Volver</a>
        </div>

        <div class="main-container">
            <div class="reports-container">
                <div class="reports-header">
                    <h1>Reportes SMS</h1>
                </div>

                <div class="reports-list-container">
                    <div class="reports-section">
                        <h2>Últimos 10 reportes analizados</h2>
                        <div class="reports-list">
                            {% for report in reports %}
                                <div class="report-card {% if report.is_valid == 'YES' %}status-valid{% else %}status-invalid{% endif %}">
                                    <div class="report-top">
                                        <div class="report-left">
                                            <div class="report-line"><span class="report-label">Fecha:</span> {{ report.report.date|date:"d/m/Y" }}</div>
                                            <div class="report-line"><span class="report-label">Hora:</span> {{ report.report.time|default:"N/A" }}</div>
                                            <div class="report-line"><span class="report-label">Área:</span> {{ report.report.area|default:"N/A" }}</div>
                                        </div>
                                        <div class="report-center">
                                            <div class="report-line"><span class="report-label">Severidad:</span> {{ report.severity|default:"N/A" }}</div>
                                            <div class="report-line"><span class="report-label">Probabilidad:</span> {{ report.probability|default:"N/A" }}</div>
                                            <div class="report-line"><span class="report-label">Valor:</span> {{ report.value|default:"N/A" }}</div>
                                        </div>
                                        <div class="report-right">
                                            <div class="report-line"><span class="report-label">Estado:</span> 
                                                <span class="badge {% if report.is_valid == 'YES' %}badge-valid{% else %}badge-invalid{% endif %}">
                                                    {% if report.is_valid == 'YES' %}Válido{% else %}No válido{% endif %}
                                                </span>
                                            </div>
                                            <div class="report-line"><span class="report-label">Analizado:</span> {{ report.created_at|date:"d/m/Y H:i" }}</div>
                                        </div>
                                    </div>
                                    <div class="report-description">
                                        <div class="report-line"><span class="report-label">Descripción:</span> {{ report.report.description|truncatechars:150 }}</div>
                                    </div>
                                    <div class="report-actions">
                                        <a href="{% url 'sms:report_detail' report.id %}" class="view-btn">Ver Detalles</a>
                                    </div>
                                </div>
                            {% empty %}
                                <div class="no-reports">No hay reportes disponibles</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>